\begin{figure}
    \begin{subfigure}[b]{0.5\textwidth}
        \centering
        \begin{algorithmic}
            \Function{Foo}{$N: \mathbb{N}$}
                \State $i \gets 0$
                \While{$i < N$}
                    \State \Call{Print}{$i$}
                    \State $i \gets i + 1$
                \EndWhile
            \EndFunction
        \end{algorithmic}
        \caption{An example function with a loop}
    \end{subfigure}
    \begin{subfigure}[b]{0.5\textwidth}
        \centering
        \begin{algorithmic}
            \Function{FooDuffed}{$N: \mathbb{N}$}
                \State $i \gets 0$
                \State $N' \gets (N + (4 - 1)) / 4$
`               \Switch{$N \text{ mod } 4$}
                    \Case{$0$}
                        \State \Call{Print}{$i$}
                        \State $i \gets i + 1$ \Comment{Fall-through}
                    \EndCase
                    \Case{$3$}
                        \State \Call{Print}{$i$}
                        \State $i \gets i + 1$ \Comment{Fall-through}
                    \EndCase
                    \Case{$2$}
                        \State \Call{Print}{$i$}
                        \State $i \gets i + 1$ \Comment{Fall-through}
                    \EndCase
                    \Case{$1$}
                        \State \Call{Print}{$i$}
                        \State $i \gets i + 1$
                    \EndCase
                \EndSwitch
                \While{$(N' - 1) > 0$}
                    \State \Call{Print}{$i$}
                    \State \Call{Print}{$i + 1$}
                    \State \Call{Print}{$i + 2$}
                    \State \Call{Print}{$i + 3$}
                    \State $i \gets i + 4$
                    \State $N' \gets N' - 1$
                \EndWhile
            \EndFunction
        \end{algorithmic}
        \caption{A function with the loop unrolled using Duff's device}
    \end{subfigure}
    \caption{A simple loop unrolled using Duff's device}
    \label{fig:basics:duff}
\end{figure}